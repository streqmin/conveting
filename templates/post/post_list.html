<h2>ê²Œì‹œíŒ</h2>
<!-- ğŸ” ê²€ìƒ‰ & í•„í„° í¼ -->
<form method="get">
    <input type="text" name="q" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥" value="{{ search_query }}" />
    <select name="user">
        <option value="">ì „ì²´ ì‚¬ìš©ì</option>
        {% for user_id, username in users %}
            <option value="{{ user_id }}"
                    {% if user_id|stringformat:"s" == selected_user %}selected{% endif %}>{{ username }}</option>
        {% endfor %}
    </select>
    <select name="disease">
        <option value="">ì „ì²´ ì§ˆí™˜</option>
        {% for disease_id, disease_name in diseases %}
            <option value="{{ disease_id }}"
                    {% if disease_id|stringformat:"s" == selected_disease %}selected{% endif %}>{{ disease_name }}</option>
        {% endfor %}
    </select>
    <select name="body_part">
        <option value="">ì „ì²´ ë¶€ìœ„</option>
        {% for part in body_parts %}
            <option value="{{ part }}"
                    {% if part == selected_body_part %}selected{% endif %}>{{ part|title }}</option>
        {% endfor %}
    </select>
    <button type="submit">ê²€ìƒ‰</button>
</form>
<hr>
<!-- ğŸ“‹ ê²Œì‹œê¸€ ëª©ë¡ -->
{% for post in posts %}
    <div style="border: 1px solid #ccc; padding: 1em; margin-bottom: 1em;">
        <h3>{{ post.title }}</h3>
        <p>
            <strong>ì‘ì„±ì:</strong> {{ post.user.username }}
        </p>
        <p>
            <strong>ê²¬ì¢…:</strong> {{ post.breed }}
        </p>
        <p>
            <strong>ì§ˆí™˜:</strong> {{ post.disease.name }}
        </p>
        <p>
            <strong>ë¶€ìœ„:</strong> {{ post.get_body_part_display }}
        </p>
        <p>
            <strong>ì‘ì„±ì¼:</strong> {{ post.created_at|date:"Y-m-d H:i" }}
        </p>
        {% if post.image %}<img src="{{ post.image.url }}" style="max-width: 300px;" alt="ê²Œì‹œê¸€ ì´ë¯¸ì§€" />{% endif %}
        <p>
            <a href="{% url 'post_detail' post.id %}">ìì„¸íˆ ë³´ê¸°</a>
        </p>
    </div>
{% empty %}
    <p>ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
{% endfor %}
<!-- ğŸ“„ í˜ì´ì§€ë„¤ì´ì…˜ -->
<div class="pagination">
    {% if page_obj.has_previous %}
        <a href="?{% if search_query %}q={{ search_query }}&{% endif %}page={{ page_obj.previous_page_number }}">ì´ì „</a>
    {% endif %}
    <span>{{ page_obj.number }} / {{ page_obj.paginator.num_pages }}</span>
    {% if page_obj.has_next %}
        <a href="?{% if search_query %}q={{ search_query }}&{% endif %}page={{ page_obj.next_page_number }}">ë‹¤ìŒ</a>
    {% endif %}
</div>
